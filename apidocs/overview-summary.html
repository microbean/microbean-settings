<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_181) on Sat Feb 15 21:18:08 PST 2020 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF8">
<title>Overview (microBean™ Settings 0.0.2 API)</title>
<meta name="date" content="2020-02-15">
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<script type="text/javascript" src="script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Overview (microBean\u2122 Settings 0.0.2 API)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li class="navBarCell1Rev">Overview</li>
<li>Package</li>
<li>Class</li>
<li>Use</li>
<li><a href="overview-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev</li>
<li>Next</li>
</ul>
<ul class="navList">
<li><a href="index.html?overview-summary.html" target="_top">Frames</a></li>
<li><a href="overview-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 class="title"><a href="https://microbean.github.io/microbean-settings" target="_parent"><span style="font-family:Lobster, cursive;">µb</span> microbean-settings</a> 0.0.2 <a href="https://travis-ci.com/microbean/microbean-settings" target="_parent"><img src="https://travis-ci.com/microbean/microbean-settings.svg?branch=master"></a></h1>
</div>
<div class="header">
<div class="subTitle">
<div class="block">
    Provides classes and interfaces that help with acquiring
    <a href="#setting">settings</a>
    from <a href="https://jakarta.ee/specifications/cdi/2.0/apidocs/"
    target="_parent">CDI</a>-based programs.</div>
</div>
<p>See: <a href="#overview.description">Description</a></p>
</div>
<div class="contentContainer">
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Packages table, listing packages, and an explanation">
<caption><span>Packages</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Package</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="org/microbean/settings/package-summary.html">org.microbean.settings</a></td>
<td class="colLast">
<div class="block">Provides classes and interfaces that help with acquiring <a
 href="./overview-summary.html#setting">settings</a> from
 <a href="https://jakarta.ee/specifications/cdi/2.0/apidocs/"
 target="_parent">CDI</a>-based programs.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="org/microbean/settings/converter/package-summary.html">org.microbean.settings.converter</a></td>
<td class="colLast">
<div class="block">Provides classes and interfaces that help with <a
 href="./overview-summary.html#conversion">settings
 conversion</a>.</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="contentContainer"><a name="overview.description">
<!--   -->
</a>
<div class="block"><p>
    Provides classes and interfaces that help with acquiring
    <a href="#setting">settings</a>
    from <a href="https://jakarta.ee/specifications/cdi/2.0/apidocs/"
    target="_parent">CDI</a>-based programs.
  </p>

  <h1>microBean&trade; Settings</h1>

  <p>
    The microBean&trade; Settings framework serves as a single locus
    from which
    a <a href="https://jakarta.ee/specifications/cdi/2.0/apidocs/"
    target="_parent">CDI</a>-based Java program may
    read <a href="#setting"><em>settings</em></a>: deployment-time
    information and configuration often packaged externally with
    respect to the program that tailors that program to its runtime
    environment.
  </p>

  <h2>Essential Settings Terminology</h2>

  <h3 id="setting">Setting</h3>

  <p>
    A <em>setting</em> is a non-specific conceptual entity that
    loosely and imprecisely describes an aspect of something that can
    be externally configured.
  </p>

  <p>
    The term <em>setting</em> as commonly used is slippery and
    ambiguous.  Sometimes people use "setting" to mean
    the <a href="#setting_name"><em>name</em></a> of a property or
    attribute that can be externally configured in some way ("the
    setting that controls debug information", "what's the <code>debug</code> setting set to?").  Other times people use "setting" to
    mean a particular
    <a href="#setting_value"><em>value</em></a> of something that can
    be externally configured ("what's the setting for the <code>debug</code> property?").  Still other times people use "setting" to
    mean <a href="#qualifiers">an environmentally specific particular
    value of something</a> that can be configured ("use the <code>staging</code> setting for <code>debug</code>").
  </p>

  <p>
    Due in part to this ambiguity, this project deliberately does not
    represent a setting in Java code.  Instead, this project carefully
    distinguishes between <a href="#setting_name"><em>setting
    names</em></a>, <a href="#setting_value"><em>setting
    values</em></a>,
    and <a href="#qualifiers"><em>qualifiers</em></a>.
  </p>

  <h3 id="setting_name">Setting Name</h3>

  <p>
    A <em>setting name</em> is fundamentally a <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang"><code>String</code></a>.  It is not hierarchical.  It is treated as a
    unique key that, together with
    <a href="#qualifiers"><em>qualifiers</em></a>, which will be
    discussed later, can pick out a
    maximally <a href="#suitability"><em>suitable</em></a> <a href="#setting_value">setting
    value</a> from among many
    possible <a href="#suitability">suitable</a> <a href="#setting_value">setting
    values</a>.
  </p>

  <p>
    For example, the setting name for a hypothetical <code>debug</code>
    <a href="#setting">setting</a> should be, simply, <code>debug</code>,
    even if there could be many potentially
    suitable <a href="#setting_value">setting values</a> for this
    setting name.  Potentially <a href="#suitability">suitable</a>
    (and potentially incompatible) <a href="#setting_value">setting
    values</a> might include:
  </p>

  <ul>

    <li>a <a href="#setting_value">value</a> for the <code>debug</code>
      setting name in the <code>production</code> environment, all else
      being equal</li>

    <li>a <a href="#setting_value">value</a> for it in the <code>development</code> environment, all else being equal</li>

    <li>a <a href="#setting_value">value</a> for it in the <code>east</code> data center region, all else being equal</li>

    <li>a <a href="#setting_value">value</a> for it if a given feature
      test is underway but only in the <code>east</code> data center region
      but regardless of environment</li>

    <li>a last-ditch <a href="#setting_value">value</a> for it that is
      <a href="#suitability">somewhat suitable</a> in all other
      cases</li>

  </ul>

  <p>&hellip;and so on.</p>

  <p>
    To belabor the point, and most notably in this example, the
    setting name would <em>not</em> be anything like <code>production.debug</code>, or <code>development.debug</code> or <code>east.debug</code>, because setting names are not hierarchical.  It would
    be, simply, <code>debug</code>.  The mechanism to distinguish between
    these hypothetical <a href="#setting_value">setting values</a> in
    the absence of hierarchical setting
    names, <a href="#qualifiers"><em>qualifiers</em></a>, will be
    discussed below.
  </p>

  <h3 id="setting_value">Setting Value</h3>

  <p>
    A setting value is, fundamentally, deliberately and canonically a
    textual value, since that is the form in which most setting values
    are stored, and also particularly since, being configuration
    information, setting values are designed to be human-editable.
  </p>

  <p>
    Setting values conceptually are always paired with
    the <a href="#setting_name">setting name</a> they are associated
    with.  Bear in mind, however, that
    <em>several potential</em> setting values may be associated with
    any given <a href="#setting_name">setting name</a>.  Some of them
    may be more or less <a href="#suitability"><em>suitable</em></a>
    for one particular application but not for another.
    <a href="#suitability"><em>Suitability</em> is covered later
    below.</a>
  </p>

  <h3 id="source">Source</h3>

  <p>
    A <a href="#setting_value">setting value</a> conceptually
    originates from a <em>source</em>, which is simply and somewhat
    circularly any furnisher of (definitionally
    textual) <a href="#setting_value">setting values</a>.  Sources are
    represented in Java code in this project by instances of the
    <a href="org/microbean/settings/Source.html" title="class in org.microbean.settings"><code>Source</code></a> class.
  </p>

  <p>
    In this project, a <a href="org/microbean/settings/Source.html" title="class in org.microbean.settings"><code>Source</code></a> is the
    atomic unit of <a href="#setting_value_acquisition">setting value
    acquisition</a> and serves as a fa&ccedil;ade on top of systems
    ranging from simple text files to entire configuration subsystems.
    Colloquially speaking, you can <a href="org/microbean/settings/Source.html#getValue-java.lang.String-java.util.Set-">ask</a> a <a href="org/microbean/settings/Source.html" title="class in org.microbean.settings"><code>Source</code></a> for a
    <a href="org/microbean/settings/Value.html" title="class in org.microbean.settings"><code>Value</code></a> that
    is <a href="#suitability">suitable</a> for a
    setting <a href="#setting_name">named</a> by a
    particular <a href="#setting_name">setting name</a>, and it will
    respond with zero or one of them.
  </p>

  <h3 id="setting_value_acquisition">Setting Value Acquisition</h3>

  <p>
    <em>Setting value acquisition</em> is the process of acquiring a
    <a href="#setting_value">setting value</a> given
    a <a href="#setting_name">setting name</a> and some information
    about the settings space in which the setting value acquisition is
    taking place.
  </p>

  <p>
    This settings space information is more precisely known as
    <em>qualifiers</em>.
  </p>

  <h4 id="qualifiers">Qualifiers</h4>

  <p>
    A <em>qualifier</em> is a conceptual pairing of a named
    environmental aspect and its value that, together, pick out a
    single coordinate in an overall <em>settings space</em>.
  </p>

  <p>
    Consider a hypothetical, deliberately simplified organization that
    deploys many programs across <code>east</code> and <code>west</code> data
    center <code>region</code>s, and places them into <code>development</code>,
    <code>staging</code> and <code>production</code> <code>environment</code>s, and
    conducts named <code>featureTest</code>s across them.  A program
    running in this world has coordinates&mdash;qualifiers&mdash;in
    this settings space.  Specifically, a program's settings space
    qualifiers distinguish it in this hypothetical world
    by <em>qualifying</em> its location in settings space: along the
    <code>environment</code> axis (<code>environment=development</code>, or
    <code>environment=staging</code>, or <code>environment=production</code>),
    its location along the <code>region</code> axis (<code>region=east</code> or
    <code>region=west</code>), and its location along the <code>featureTest</code> axis (<code>featureTest=blinkTag</code> or <code>featureTest=autoplay</code> or a potentially infinite number of other
    possibilities).
  </p>

  <p>
    It is extremely important to understand that <strong>qualifiers,
    like setting names, are not inherently hierarchichal</strong>.
    For example, given two <a href="#setting_value">setting
    values</a>, one qualified with <code>environment=development</code> and
    <code>region=east</code>, and another qualified with <code>environment=development</code> and <code>featureTest=blinkTag</code>, which
    is "best" for an application in the <code>development</code>
    environment, running in the <code>east</code> region and undergoing the
    <code>blinkTag</code> feature test?  It is not immediately clear, and
    this is why <a href="#setting_name">setting names</a> and
    qualifiers are not expressed in terms of a hierarchical namespace.
  </p>

  <p>
    A qualifier is represented in Java code in this project by
    instances of the <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Annotation.html?is-external=true" title="class or interface in java.lang.annotation"><code>Annotation</code></a> class,
    following a similar concept
    in <a href="https://jakarta.ee/specifications/cdi/2.0/cdi-spec-2.0.html#qualifiers">CDI</a>.
  </p>

  <h4 id="setting_value_request">Setting Value Request</h4>

  <p>
    A <em>setting value request</em> is the logical sending of a pair
    of a <a href="#setting_name">setting name</a> and
    some <a href="#qualifiers">qualifiers</a> to one or
    more <a href="#source">sources</a>.
  </p>

  <p>
    A well-behaved <a href="#source">source</a> that is provided with
    this information will either furnish exactly
    one <a href="#setting_value_response">setting value response</a> for the
    conceptual setting identified by the setting value request, or
    will indicate that it can furnish
    no <a href="#suitability">suitable</a>
    <a href="#setting_value_response">setting value response</a>.
  </p>

  <p>
    If a source furnishes a <a href="#setting_value_response">setting
    value response</a>, then
    the <a href="#setting_value_response">setting value response</a>
    is said to be <a href="#suitability"><em>suitable to some
    degree</em></a>.
  </p>

  <h4 id="setting_value_response">Setting Value Response</h4>

  <p>
    A <em>setting value response</em> is the logical sending of a
    logical tuple consisting of a <a href="#setting_name">setting
    name</a>,
    a <a href="#suitability">suitable</a> <a href="#setting_value">setting
    value</a>, and a subset of
    the <a href="#setting_value_request">setting value
    request</a>'s <a href="#qualifiers">qualifiers</a> from which a
    degree of <em>suitability</em> is derived in response to the
    reception of a <a href="#setting_value_request">setting value
    request</a>.
  </p>

  <h4 id="suitability">Suitability</h4>

  <p>
    A <a href="#setting_value_response">setting value response</a>'s <em>suitability</em> for its
    corresponding <a href="#setting_value_request">setting value request</a> is a measure of how
    suited&mdash;how tailored, how specific&mdash;its associated
    <a href="#setting_value">setting value</a> is for a
    given <a href="#setting_value_request">setting value request</a>.
  </p>

  <p>
    <a href="#setting_value_response">Setting value response</a>
    suitability is represented by the fact that
    a <a href="#setting_value_response">setting value response</a>
    has <a href="#qualifiers">qualifiers</a>, in a manner similar to
    how a <a href="#setting_value_request">setting value request</a>
    has qualifiers.  To be <em>at all</em> suitable, a setting value
    response's qualifiers must be either equal in kind and number to
    the set of qualifiers present in the corresponding setting value
    request, or a subset in kind and number of those qualifiers.
  </p>

  <p>
    Therefore, a setting value response whose qualifiers are smaller
    in number than the qualifiers in its corresponding value
    acquisition request is less suitable for the setting in question
    than a setting value whose qualifiers are equal in number to the
    qualifiers in its corresponding setting value request.
  </p>

  <p>
    Colloquially speaking, in other words: if
    a <a href="#setting_value_request">setting value request</a> for a
    setting <a href="#setting_name">named</a> <code>debug</code> arrives at
    a <a href="#source">source</a> with
    <a href="#qualifiers">qualifiers</a> <code>{environment=production,
    region=east}</code>, then
    a <a href="#setting_value_response">setting value response</a>
    whose qualifiers are
    <code>{environment=production}</code> is less suitable for that
    setting value request than a setting value response whose
    qualifiers are <code>{environment=production, region=east}</code>,
    and a setting value response whose qualifiers are empty is the
    least suitable of all possible setting values for that value
    acquisition request.
  </p>

  <h4 id="ambiguity">Ambiguity and Value Arbitration</h4>

  <p>
    When each of two <a href="#source">sources</a> responds to
    a <a href="#setting_value_request">setting value request</a>, a
    requester must choose between the
    two <a href="#setting_value_response">setting value responses</a>
    received.  Sometimes, choosing is easy: if there is only one
    <a href="#suitability">suitable</a> setting value response, then
    there is no question that its
    associated <a href="#setting_value">setting value</a> is the one
    that should be used, or if there is one setting value response
    that is more <a href="#suitability">suitable</a> than another,
    then obviously the more suitable one should be chosen.  But if two
    setting value requests are equally suitable, some other mechanism
    to disambiguate them must be used.  This is called <em>value
    arbitration</em>.
  </p>

  <p>
    Value arbitration is carried out by an <em>arbiter</em>.  An
    arbiter is a notional resolver of otherwise ambiguous setting
    value responses.  It receives two or more setting value responses
    with equal suitability and uses whatever heuristic it likes to
    choose between them.  Arbiters are represented in Java code in
    this project by instances of the <a href="org/microbean/settings/Arbiter.html" title="class in org.microbean.settings"><code>Arbiter</code></a> class.
  </p>

  <p>
    If an arbiter cannot arbitrate multiple ambiguous setting value
    responses, then the overall process
    of <a href="#setting_value_acquisition">setting value
    acquisition</a> fails.
  </p>

  <h3 id="interpolation">Interpolation</h3>

  <p>
    A <a href="#setting_value">setting value</a> may contain
    references to other <a href="#setting_name">setting names</a> for
    which <a href="#setting_value_request">setting value requests</a>
    should be issued.  Processing these references is known
    as <em>interpolation</em>.
  </p>

  <p>
    All interpolation in this project is carried out by an
    implementation of
    the <a href="https://jakarta.ee/specifications/expression-language/3.0/">Jakarta
    Expression Language</a>.
  </p>

  <p>
    For example, in this project, for
    a <a href="#setting_name">setting name</a> of, say, <code>javaHomeDescription</code>, a
    potentially <a href="#suitability">suitable</a> <a href="#setting_value">setting
    value</a> of "<code>Your java.home variable is:
    ${settings['java.home']}</code>" will be interpreted such that
    during <a href="#setting_value_acquisition">setting value
    acquisition</a> a <a href="#setting_value_request">setting value
    request</a> will be issued for a
    setting <a href="#setting_name">named</a> <code>java.home</code>, and
    any value received for <em>that</em> setting name will replace
    "<code>${settings['java.home']}</code>".
  </p>

  <h3 id="conversion">Conversion</h3>

  <p>
    Once a <a href="#setting_value">setting value</a> has been
    successfully <a href="#setting_value_acquisition">acquired</a>, it
    might need to be converted into a different data type.  For
    example, a <a href="#setting_value">setting value</a> of "<code>1</code>"&mdash;a <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang"><code>String</code></a>&mdash;might be better
    represented within Java code as an <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang"><code>Integer</code></a>.  <em>Conversion</em> is the process of
    transforming a (definitionally) textual-typed setting value (such
    as a <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang"><code>String</code></a>) into another data type
    representation (such as an <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang"><code>Integer</code></a>).
  </p>

  <h4 id="converter">Converter</h4>

  <p>
    A <em>converter</em> is a notional, preferably stateless entity
    that can accept a (definitionally
    textual) <a href="#setting_value">setting value</a> and, without
    changing its meaning, represent it using a particular programming
    language data type.  Converters are represented in Java code in
    this project by implementations of the <a href="org/microbean/settings/Converter.html" title="interface in org.microbean.settings"><code>Converter</code></a> interface.
  </p>

  <h2 id="essential_classes">Essential Classes</h2>

  <p>
    In this project, the <a href="org/microbean/settings/Settings.html" title="class in org.microbean.settings"><code>Settings</code></a> class
    encapsulates all aspects
    of <a href="#setting_value_acquisition">setting value
    acquisition</a> described above.  A <a href="org/microbean/settings/Settings.html" title="class in org.microbean.settings"><code>Settings</code></a> instance gathers together <a href="org/microbean/settings/Source.html" title="class in org.microbean.settings"><code>Source</code></a>s, <a href="org/microbean/settings/Arbiter.html" title="class in org.microbean.settings"><code>Arbiter</code></a>s, <a href="org/microbean/settings/Converter.html" title="interface in org.microbean.settings"><code>Converter</code></a>s and a pluggable implementation
    of
    the <a href="https://jakarta.ee/specifications/expression-language/3.0/">Jakarta
    Expression Language</a> to provide setting value acquisition
    services via methods like <a href="org/microbean/settings/Settings.html#get-java.lang.String-java.util.Set-org.microbean.settings.Converter-java.util.function.BiFunction-"><code>Settings.get(String, Set,
    Converter, BiFunction)</code></a>.
  </p></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd><a href="https://about.me/lairdnelson"
             target="_parent">Laird Nelson</a></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="org/microbean/settings/Settings.html" title="class in org.microbean.settings"><code>Settings</code></a>, 
<a href="org/microbean/settings/Arbiter.html" title="class in org.microbean.settings"><code>Arbiter</code></a>, 
<a href="org/microbean/settings/Converter.html" title="interface in org.microbean.settings"><code>Converter</code></a>, 
<a href="org/microbean/settings/Source.html" title="class in org.microbean.settings"><code>Source</code></a>, 
<a href="org/microbean/settings/Value.html" title="class in org.microbean.settings"><code>Value</code></a></dd>
</dl>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li class="navBarCell1Rev">Overview</li>
<li>Package</li>
<li>Class</li>
<li>Use</li>
<li><a href="overview-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev</li>
<li>Next</li>
</ul>
<ul class="navList">
<li><a href="index.html?overview-summary.html" target="_top">Frames</a></li>
<li><a href="overview-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &copy; 2019&ndash;2020, <a href="http://microbean.systems/" target="_parent">microBean™</a>. All rights reserved.</small></p>
</body>
</html>
